{"ast":null,"code":"import jwtDecode from'jwt-decode';import{AUTH_LOGIN_SESSION_STORAGE_KEY}from'../config';export var setInitialAuthState=function setInitialAuthState(){//take the token from session storage (if exists)\nvar token=sessionStorage.getItem(AUTH_LOGIN_SESSION_STORAGE_KEY);var user=null;if(token){// setAuthHeaders\nvar container=jwtDecode(token);user=container.user;}return{user:user,token:token};};export var handleToken=function handleToken(state,token){state.token=token;// making token with jwt decoder\nvar container=jwtDecode(token);state.user=container.user;sessionStorage.setItem(AUTH_LOGIN_SESSION_STORAGE_KEY,token);};","map":{"version":3,"names":["jwtDecode","AUTH_LOGIN_SESSION_STORAGE_KEY","setInitialAuthState","token","sessionStorage","getItem","user","container","handleToken","state","setItem"],"sources":["/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/src/auth/utils.ts"],"sourcesContent":["import jwtDecode from 'jwt-decode';\nimport { AUTH_LOGIN_SESSION_STORAGE_KEY } from '../config';\nimport User from '../models/User';\nimport {AuthState} from './authSlice';\n\nexport const setInitialAuthState = ():AuthState => {\n\n      //take the token from session storage (if exists)\n      const token = sessionStorage.getItem(AUTH_LOGIN_SESSION_STORAGE_KEY);\n      let user = null;\n\n      if(token){\n         // setAuthHeaders\n         const container: {user:User} = jwtDecode(token);\n         user = container.user;\n      } \n      return {\n            user,\n            token\n      }\n}\nexport const handleToken = (state: AuthState, token: string) => {\n\n      state.token = token;\n      // making token with jwt decoder\n      const container:{user:User} = jwtDecode(token);\n      state.user = container.user;\n\n      sessionStorage.setItem(AUTH_LOGIN_SESSION_STORAGE_KEY, token);\n\n}"],"mappings":"AAAA,MAAO,CAAAA,SAAS,KAAM,YAAY,CAClC,OAASC,8BAA8B,KAAQ,WAAW,CAI1D,MAAO,IAAM,CAAAC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAA,CAAmB,CAE7C;AACA,GAAM,CAAAC,KAAK,CAAGC,cAAc,CAACC,OAAO,CAACJ,8BAA8B,CAAC,CACpE,GAAI,CAAAK,IAAI,CAAG,IAAI,CAEf,GAAGH,KAAK,CAAC,CACN;AACA,GAAM,CAAAI,SAAsB,CAAGP,SAAS,CAACG,KAAK,CAAC,CAC/CG,IAAI,CAAGC,SAAS,CAACD,IAAI,CACxB,CACA,MAAO,CACDA,IAAI,CAAJA,IAAI,CACJH,KAAK,CAALA,KACN,CAAC,CACP,CAAC,CACD,MAAO,IAAM,CAAAK,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,KAAgB,CAAEN,KAAa,CAAK,CAE1DM,KAAK,CAACN,KAAK,CAAGA,KAAK,CACnB;AACA,GAAM,CAAAI,SAAqB,CAAGP,SAAS,CAACG,KAAK,CAAC,CAC9CM,KAAK,CAACH,IAAI,CAAGC,SAAS,CAACD,IAAI,CAE3BF,cAAc,CAACM,OAAO,CAACT,8BAA8B,CAAEE,KAAK,CAAC,CAEnE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}