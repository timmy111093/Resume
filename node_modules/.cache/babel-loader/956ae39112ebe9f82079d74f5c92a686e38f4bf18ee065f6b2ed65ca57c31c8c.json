{"ast":null,"code":"import _regeneratorRuntime from\"/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import styles from'./EmployeeDetails.module.scss';import{getEmployee,deleteEmployee}from'../../../../../Utils/fetch';import{useAppDispatch,useAppSelector}from'../../../../../hooks';import{useParams,useNavigate}from'react-router-dom';import{BASE_API_URL}from'../../../../../Utils/fetch';import Loader from'../../../../Loader/Loader';import{NavLink}from'react-router-dom';import EditEmployee from'../EditEmployee/EditEmployee';import{removeEmployee,setEmployee}from'../../employeesSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EmployeeDetails=function EmployeeDetails(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showEditEmployee=_useState2[0],setShowEditEmployee=_useState2[1];var params=useParams();var navigate=useNavigate();var dispatch=useAppDispatch();var _useAppSelector=useAppSelector(function(state){return state;}),authState=_useAppSelector.authState,employeesState=_useAppSelector.employeesState;var user=authState.user;var employee=employeesState.employee,employees=employeesState.employees;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var editModalHandler=function editModalHandler(){setShowEditEmployee(function(prevState){return!prevState;});};var deletedEmployee=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var success;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!params.empId){_context.next=13;break;}setLoading(true);_context.prev=2;_context.next=5;return deleteEmployee(+params.empId);case 5:success=_context.sent;if(success){alert('employee was deleted successfully!');dispatch(removeEmployee(+params.empId));navigate('/employees');}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);setLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}));return function deletedEmployee(){return _ref.apply(this,arguments);};}();var renderOptions=function renderOptions(){if(user){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavLink,{onClick:editModalHandler,to:\"#\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Edit\"})}),/*#__PURE__*/_jsx(NavLink,{onClick:deletedEmployee,to:\"#\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Delete\"})})]});}};useEffect(function(){if(params.empId){var id=+params.empId;var _employee=employees.find(function(e){return e.id===id;});if(_employee){dispatch(setEmployee(_employee));setLoading(false);}else{getEmployee(+params.empId).then(function(employee){// setEmployee(employee);\ndispatch(setEmployee(employee));}).catch(function(err){console.log(err.message);}).finally(function(){setLoading(false);});}}},[]);var renderEmployee=function renderEmployee(){if(employee){var imgSrc=\"\".concat(BASE_API_URL,\"/images/\").concat(employee.imageName);return/*#__PURE__*/_jsxs(\"div\",{className:\"Box \".concat(styles.EmployeeDetails__content),children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u05DB\\u05E8\\u05D8\\u05D9\\u05E1 \\u05E2\\u05D5\\u05D1\\u05D3\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"header\",{className:styles.EmployeeItem__empHeader,children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u05DE\\u05E1' \\u05E2\\u05D5\\u05D1\\u05D3:\"}),\" \",employee.id]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u05E9\\u05DD \\u05DE\\u05DC\\u05D0: \"}),\" \",employee.firstName,\" \",employee.lastName]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u05EA\\u05E4\\u05E7\\u05D9\\u05D3: \"}),\" \",employee.title]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u05DE\\u05D2\\u05D5\\u05E8\\u05D9\\u05DD: \"}),\" \",employee.city,\", \",employee.country]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\" \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05DC\\u05D9\\u05D3\\u05D4:\"}),\" \",employee.birthDate]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:styles.EmployeeDetails__img,children:/*#__PURE__*/_jsx(\"img\",{src:imgSrc,style:{width:'100%'}})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.EmployeeItem__options,children:[renderOptions(),/*#__PURE__*/_jsx(NavLink,{to:\"/employees\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Back\"})})]})]});}};if(loading)return/*#__PURE__*/_jsx(Loader,{});return/*#__PURE__*/_jsxs(\"div\",{className:styles.EmployeeDetails__card,children:[renderEmployee(),showEditEmployee&&employee&&/*#__PURE__*/_jsx(EditEmployee,{onClose:editModalHandler,employee:employee})]});};export default EmployeeDetails;","map":{"version":3,"names":["React","useState","useEffect","styles","getEmployee","deleteEmployee","useAppDispatch","useAppSelector","useParams","useNavigate","BASE_API_URL","Loader","NavLink","EditEmployee","removeEmployee","setEmployee","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","EmployeeDetails","_useState","_useState2","_slicedToArray","showEditEmployee","setShowEditEmployee","params","navigate","dispatch","_useAppSelector","state","authState","employeesState","user","employee","employees","_useState3","_useState4","loading","setLoading","editModalHandler","prevState","deletedEmployee","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","success","wrap","_callee$","_context","prev","next","empId","sent","alert","t0","console","log","stop","apply","arguments","renderOptions","children","onClick","to","id","find","e","then","catch","err","message","finally","renderEmployee","imgSrc","concat","imageName","className","EmployeeDetails__content","EmployeeItem__empHeader","firstName","lastName","title","city","country","birthDate","EmployeeDetails__img","src","style","width","EmployeeItem__options","EmployeeDetails__card","onClose"],"sources":["/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/src/components/layoutArea/EmployeesArea/Employees/EmployeeDetails/EmployeeDetails.tsx"],"sourcesContent":["import React, { FC,useState,useEffect } from 'react';\nimport styles from './EmployeeDetails.module.scss';\nimport {getEmployee, deleteEmployee} from '../../../../../Utils/fetch';\nimport {useAppDispatch,useAppSelector} from '../../../../../hooks';\nimport Employee from '../../../../../models/Employee';\nimport {useParams , useNavigate} from 'react-router-dom';\nimport {BASE_API_URL} from '../../../../../Utils/fetch';\nimport Loader from '../../../../Loader/Loader';\nimport {NavLink} from 'react-router-dom';\nimport EditEmployee from '../EditEmployee/EditEmployee';\nimport { removeEmployee, setEmployee } from '../../employeesSlice';\n\n\ninterface EmployeeDetailsProps {}\n\nconst EmployeeDetails: FC<EmployeeDetailsProps> = () => {\n\n  const [showEditEmployee,setShowEditEmployee] = useState(false);\n  const params = useParams();\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n  const {authState,employeesState} = useAppSelector((state) => state);\n  const {user} = authState;\n  const {employee,employees} = employeesState;\n  const [loading,setLoading] = useState(true);\n\n  const editModalHandler = () => {\n    setShowEditEmployee((prevState) => !prevState);\n }\n\n  const deletedEmployee = async () => {\n    if(params.empId){\n      setLoading(true);\n      try{\n        const success = await deleteEmployee(+params.empId);\n        if(success) {\n          alert('employee was deleted successfully!');\n          dispatch(removeEmployee(+params.empId));\n          navigate('/employees');\n        }\n      }catch(err){\n        console.log(err);\n        setLoading(false);\n      }\n    }\n  }\n\n  const renderOptions = () => {\n    if(user){\n      return(\n        <>\n        <NavLink onClick={editModalHandler} to='#'><button>Edit</button></NavLink>\n        <NavLink onClick={deletedEmployee} to='#'><button>Delete</button></NavLink>\n        </>\n      )\n    }\n  }\n\n  useEffect(() => {\n\n    if(params.empId){\n      const id = +params.empId;\n      const employee = employees.find((e) => e.id === id);\n      if(employee){\n        dispatch(setEmployee(employee));\n        setLoading(false);\n      }else{\n        getEmployee(+params.empId).then((employee) => {\n          // setEmployee(employee);\n          dispatch(setEmployee(employee));\n        }).catch((err) => {\n          console.log(err.message);\n        }).finally(() => {\n          setLoading(false)\n        });\n      }\n    }  \n\n  },[])\n\n  const renderEmployee = () => {\n\n    if(employee) {\n      const imgSrc = `${BASE_API_URL}/images/${employee.imageName}`;\n      return(\n          <div className={`Box ${styles.EmployeeDetails__content}`}>\n          <h4>כרטיס עובד</h4><hr />\n          <header className={styles.EmployeeItem__empHeader}>\n          <b>מס' עובד:</b> {employee.id}\n      </header>\n            <div><b>שם מלא: </b> {employee.firstName} {employee.lastName}</div>\n            <div><b>תפקיד: </b> {employee.title}</div>\n            <div><b>מגורים: </b> {employee.city}, {employee.country}</div>\n            <div><b> תאריך לידה:</b> {employee.birthDate}</div><br />\n            <div className={styles.EmployeeDetails__img}>\n            <img src={imgSrc}  style={{width:'100%'}}/>\n          </div>\n          <div className={styles.EmployeeItem__options}>\n            {renderOptions()}\n            <NavLink to='/employees'><button>Back</button></NavLink>\n          </div>\n          </div>\n      )\n    }\n    \n  }\n\n  if(loading) return <Loader />\n\n  return(\n    <div className={styles.EmployeeDetails__card}>\n      {renderEmployee()}\n      {(showEditEmployee && employee) && <EditEmployee onClose={editModalHandler} employee={employee}/>}\n    </div>\n\n  );\n}\n\nexport default EmployeeDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}