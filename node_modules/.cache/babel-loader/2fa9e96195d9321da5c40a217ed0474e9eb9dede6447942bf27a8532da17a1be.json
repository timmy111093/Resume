{"ast":null,"code":"import _objectSpread from\"/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{useForm}from'react-hook-form';import FormErrors from'../../FormErrors/FormErrors';import styles from'./Login.module.scss';import Button from'../../Button/Button';import{loginAsync}from'../../../fetch/auth';import{useNavigate}from'react-router-dom';import{useAppDispatch}from'../../../hooks';import{login}from'../../../auth/authSlice';import authValidation from'../authValidation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _formState$errors$use,_formState$errors$pas;var dispatch=useAppDispatch();var navigate=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,formState=_useForm.formState;var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(credentials){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return loginAsync(credentials);case 3:token=_context.sent;dispatch(login(token));alert('welcome back');navigate('/home');_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log('error:'+_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"Box \".concat(styles.Login),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(loginHandler),children:[/*#__PURE__*/_jsxs(FormErrors,{error:(_formState$errors$use=formState.errors.username)===null||_formState$errors$use===void 0?void 0:_formState$errors$use.message,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\"},register('username',authValidation.username)))]}),/*#__PURE__*/_jsxs(FormErrors,{error:(_formState$errors$pas=formState.errors.password)===null||_formState$errors$pas===void 0?void 0:_formState$errors$pas.message,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\"},register('password',authValidation.password)))]}),/*#__PURE__*/_jsx(Button,{children:\"Login\"})]})]});};export default Login;","map":{"version":3,"names":["React","useForm","FormErrors","styles","Button","loginAsync","useNavigate","useAppDispatch","login","authValidation","jsx","_jsx","jsxs","_jsxs","Login","_formState$errors$use","_formState$errors$pas","dispatch","navigate","_useForm","register","handleSubmit","formState","loginHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","token","wrap","_callee$","_context","prev","next","sent","alert","t0","console","log","stop","_x","apply","arguments","className","concat","children","onSubmit","error","errors","username","message","_objectSpread","type","password"],"sources":["/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/src/components/AuthArea/Login/Login.tsx"],"sourcesContent":["import React, { FC } from 'react';\nimport { useForm } from 'react-hook-form';\nimport Credentials from '../../../models/Credentials';\nimport FormErrors from '../../FormErrors/FormErrors';\nimport styles from './Login.module.scss';\nimport Button from '../../Button/Button';\nimport { loginAsync } from '../../../fetch/auth';\nimport { useNavigate } from 'react-router-dom';\nimport {useAppDispatch} from '../../../hooks';\nimport { login } from '../../../auth/authSlice';\nimport Modal from '../../Modal/Modal';\nimport authValidation from '../authValidation';\n\ninterface LoginProps {}\n\nconst Login: FC<LoginProps> = () => {\n\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const {register,handleSubmit,formState} = useForm<Credentials>();\n  const loginHandler = async (credentials:Credentials) => {\n    try{\n      const token = await loginAsync(credentials);\n      dispatch(login(token));\n      alert('welcome back');\n      navigate('/home');\n    }catch(error){\n      console.log('error:' + error);\n    }\n  }\n\n  return(\n\n    <div className={`Box ${styles.Login}`}>\n      <h3>Login</h3>\n      <form onSubmit={handleSubmit(loginHandler)}>\n        <FormErrors error={formState.errors.username?.message}>\n          <label>Username:</label>\n          <input type=\"text\" {...register('username', authValidation.username)}/>\n        </FormErrors>\n        <FormErrors error={formState.errors.password?.message}>\n          <label>Password:</label>\n          <input type=\"text\" {...register('password', authValidation.password)}/>\n        </FormErrors>\n        <Button>Login</Button>\n      </form>\n    </div>\n\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}