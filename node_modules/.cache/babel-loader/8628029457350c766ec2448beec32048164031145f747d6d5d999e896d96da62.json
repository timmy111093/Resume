{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport { AUTH_LOGIN_SESSION_STORAGE_KEY } from '../config';\nexport const setInitialAuthState = () => {\n  //take the token from session storage (if exists)\n  const token = sessionStorage.getItem(AUTH_LOGIN_SESSION_STORAGE_KEY);\n  let user = null;\n  if (token) {\n    // setAuthHeaders\n    const container = jwtDecode(token);\n    user = container.user;\n  }\n  return {\n    user,\n    token\n  };\n};\nexport const handleToken = (state, token) => {\n  state.token = token;\n  // making token with jwt decoder\n  const container = jwtDecode(token);\n  state.user = container.user;\n  sessionStorage.setItem(AUTH_LOGIN_SESSION_STORAGE_KEY, token);\n};","map":{"version":3,"names":["jwtDecode","AUTH_LOGIN_SESSION_STORAGE_KEY","setInitialAuthState","token","sessionStorage","getItem","user","container","handleToken","state","setItem"],"sources":["/Users/timy1/Desktop/2.3.23 - ShoesStore/shoesStore/src/auth/utils.ts"],"sourcesContent":["import jwtDecode from 'jwt-decode';\nimport { AUTH_LOGIN_SESSION_STORAGE_KEY } from '../config';\nimport User from '../models/User';\nimport {AuthState} from './authSlice';\n\nexport const setInitialAuthState = ():AuthState => {\n\n      //take the token from session storage (if exists)\n      const token = sessionStorage.getItem(AUTH_LOGIN_SESSION_STORAGE_KEY);\n      let user = null;\n\n      if(token){\n         // setAuthHeaders\n         const container: {user:User} = jwtDecode(token);\n         user = container.user;\n      } \n      return {\n            user,\n            token\n      }\n}\nexport const handleToken = (state: AuthState, token: string) => {\n\n      state.token = token;\n      // making token with jwt decoder\n      const container:{user:User} = jwtDecode(token);\n      state.user = container.user;\n\n      sessionStorage.setItem(AUTH_LOGIN_SESSION_STORAGE_KEY, token);\n\n}"],"mappings":"AAAA,OAAOA,SAAS,MAAM,YAAY;AAClC,SAASC,8BAA8B,QAAQ,WAAW;AAI1D,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAgB;EAE7C;EACA,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAACJ,8BAA8B,CAAC;EACpE,IAAIK,IAAI,GAAG,IAAI;EAEf,IAAGH,KAAK,EAAC;IACN;IACA,MAAMI,SAAsB,GAAGP,SAAS,CAACG,KAAK,CAAC;IAC/CG,IAAI,GAAGC,SAAS,CAACD,IAAI;EACxB;EACA,OAAO;IACDA,IAAI;IACJH;EACN,CAAC;AACP,CAAC;AACD,OAAO,MAAMK,WAAW,GAAGA,CAACC,KAAgB,EAAEN,KAAa,KAAK;EAE1DM,KAAK,CAACN,KAAK,GAAGA,KAAK;EACnB;EACA,MAAMI,SAAqB,GAAGP,SAAS,CAACG,KAAK,CAAC;EAC9CM,KAAK,CAACH,IAAI,GAAGC,SAAS,CAACD,IAAI;EAE3BF,cAAc,CAACM,OAAO,CAACT,8BAA8B,EAAEE,KAAK,CAAC;AAEnE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}